<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MissImp Test â€¢ MissImp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="MissImp Test">
<meta property="og:description" content="MissImp">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MissImp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/A_Generate_Missingness_and_Tests_MCAR.html">Generation of Missingness and Tests of MCAR</a>
    </li>
    <li>
      <a href="../articles/B_MissImp_Test.html">MissImp Test</a>
    </li>
    <li>
      <a href="../articles/C_Each_Imputation_Method.html">Imputation for each method</a>
    </li>
    <li>
      <a href="../articles/D_oracle_simple_test.html">Oracle Simple Test</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>MissImp Test</h1>
                        <h4 data-toc-skip class="author">Xuwen Liu</h4>
            
            <h4 data-toc-skip class="date">2022-03-23</h4>
      
      
      <div class="hidden name"><code>B_MissImp_Test.Rmd</code></div>

    </div>

    
    
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">stats</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MissImp</span><span class="op">)</span>
<span class="co"># knitr::opts_chunk$set(eval = FALSE)</span></code></pre></div>
<div class="section level2">
<h2 id="test-on-the-abalone-data">Test on the abalone data<a class="anchor" aria-label="anchor" href="#test-on-the-abalone-data"></a>
</h2>
<p>In the package, 100 rows of the abalone dataset is stored to test different functions.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span><span class="st">'../data/test_abalone.rda'</span><span class="op">)</span></code></pre></div>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">abalone_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">test_abalone</span><span class="op">)</span>
<span class="va">col_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>
<span class="va">col_dis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span><span class="op">)</span>
<span class="va">col_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="va">col_num</span><span class="op">)</span> <span class="op">{</span>
  <span class="kw">if</span> <span class="op">(</span><span class="va">j</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">col_dis</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span>
  <span class="kw">else</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="va">col_cat</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">abalone_data</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span><span class="op">[</span><span class="va">abalone_data</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span> <span class="op">==</span> <span class="st">"?"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
  <span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="va">abalone_data</span> <span class="op">&lt;-</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/row.names.html" class="external-link">row.names</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">abalone_data</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##      V2    V3    V4     V5     V6     V7    V8 V9 V1</span>
<span class="co">## 1 0.455 0.365 0.095 0.5140 0.2245 0.1010 0.150 15  M</span>
<span class="co">## 2 0.350 0.265 0.090 0.2255 0.0995 0.0485 0.070  7  M</span>
<span class="co">## 3 0.530 0.420 0.135 0.6770 0.2565 0.1415 0.210  9  F</span>
<span class="co">## 4 0.440 0.365 0.125 0.5160 0.2155 0.1140 0.155 10  M</span>
<span class="co">## 5 0.330 0.255 0.080 0.2050 0.0895 0.0395 0.055  7  I</span>
<span class="co">## 6 0.425 0.300 0.095 0.3515 0.1410 0.0775 0.120  8  I</span></code></pre>
<p>After loading and preprocessing the abalone dataset, we can create incomplete datasets with different mechanisms and proportions of missing data. Here for demonstration we chose the "MAR1" missing data mechanism and 20% missing data percentage. (More details about the generation of missing data could be found in vignette "A_Generate_Missingness_and_Tests_MCAR")</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">X.complete</span> <span class="op">&lt;-</span> <span class="va">abalone_data</span>
<span class="va">mech</span> <span class="op">&lt;-</span> <span class="st">"MAR1"</span>
<span class="va">miss_prop</span> <span class="op">&lt;-</span> <span class="fl">0.3</span>
<span class="va">rs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate_miss.html">generate_miss</a></span><span class="op">(</span><span class="va">X.complete</span>, <span class="va">miss_prop</span>, mechanism <span class="op">=</span> <span class="va">mech</span><span class="op">)</span></code></pre></div>
<p>Then a model could be chosen to impute the incomplete dataset. The parameters shown below need to be chosen wisely.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">rs</span><span class="op">$</span><span class="va">X.incomp</span>
<span class="va">df_complete</span> <span class="op">&lt;-</span> <span class="va">X.complete</span>
<span class="va">col_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span><span class="op">)</span>
<span class="va">col_dis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span><span class="op">)</span>
<span class="va">col_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>

<span class="va">maxiter_tree</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="va">maxiter_pca</span> <span class="op">&lt;-</span> <span class="fl">200</span>
<span class="va">maxiter_mice</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="va">ncp_pca</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">df_complete</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>
<span class="va">learn_ncp</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span>

<span class="va">num_mi</span> <span class="op">&lt;-</span> <span class="fl">4</span>
<span class="va">n_resample</span> <span class="op">&lt;-</span> <span class="fl">4</span>
<span class="va">n_df</span> <span class="op">&lt;-</span> <span class="fl">5</span>

<span class="va">imp_method</span> <span class="op">&lt;-</span> <span class="st">"MI_Ranger"</span>
<span class="va">resample_method</span> <span class="op">&lt;-</span> <span class="st">"bootstrap"</span>
<span class="va">cat_combine_by</span> <span class="op">&lt;-</span> <span class="st">"onehot"</span>
<span class="va">var_cat</span> <span class="op">&lt;-</span> <span class="st">"wilcox_va"</span></code></pre></div>
<p>The initial incomplete dataset, the imputed dataset and the uncertainty for each imputed data are shown below as well as the performance matrices such as MSE(Mean Squared Error) for numerical columns and F1-score for the categorical ones (if the complete dataset is given).</p>
<p>There are two types of MSE that are calculated. The  is the normal one that compares the L2 distance between the complete dataset and the imputed one. However, in this case, the columns with higher data values could weight more in MSE than other columns. So, for , before performing the calculation of MSE, the imputed data set and complete dataset are both scaled with Min-Max scale using the parameter from complete dataset.</p>
<p>It is also normal that some lines in  are . This comes form the fact that there are too little number of resampled dataset (). If in all those resampled dataset, a certain line shows only once and thus is imputed only once, there is no calculation for the uncertainty of imputation.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##      V2    V3    V4     V5     V6     V7    V8 V9 V1</span>
<span class="co">## 1    NA 0.365    NA 0.5140 0.2245 0.1010    NA NA  M</span>
<span class="co">## 2 0.350 0.265 0.090 0.2255 0.0995 0.0485 0.070  7  M</span>
<span class="co">## 3 0.530 0.420 0.135 0.6770 0.2565 0.1415 0.210  9  F</span>
<span class="co">## 4 0.440    NA 0.125 0.5160     NA     NA 0.155 10  M</span>
<span class="co">## 5 0.330 0.255 0.080 0.2050     NA 0.0395 0.055  7  I</span>
<span class="co">## 6 0.425 0.300 0.095 0.3515 0.1410 0.0775 0.120  8  I</span></code></pre>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">imp</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##          V2        V3        V4     V5         V6        V7        V8 V9 V1</span>
<span class="co">## 1 0.4619375 0.3650000 0.1244062 0.5140 0.22450000 0.1010000 0.1536979  9  M</span>
<span class="co">## 2 0.3500000 0.2650000 0.0900000 0.2255 0.09950000 0.0485000 0.0700000  7  M</span>
<span class="co">## 3 0.5300000 0.4200000 0.1350000 0.6770 0.25650000 0.1415000 0.2100000  9  F</span>
<span class="co">## 4 0.4400000 0.3653906 0.1250000 0.5160 0.21551875 0.1091073 0.1550000 10  M</span>
<span class="co">## 5 0.3300000 0.2550000 0.0800000 0.2050 0.07986215 0.0395000 0.0550000  7  I</span>
<span class="co">## 6 0.4250000 0.3000000 0.0950000 0.3515 0.14100000 0.0775000 0.1200000  8  I</span></code></pre>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">imp.disj</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##          V2        V3        V4     V5         V6        V7        V8 V9 V1_F</span>
<span class="co">## 1 0.4619375 0.3650000 0.1244062 0.5140 0.22450000 0.1010000 0.1536979  9    0</span>
<span class="co">## 2 0.3500000 0.2650000 0.0900000 0.2255 0.09950000 0.0485000 0.0700000  7    0</span>
<span class="co">## 3 0.5300000 0.4200000 0.1350000 0.6770 0.25650000 0.1415000 0.2100000  9    1</span>
<span class="co">## 4 0.4400000 0.3653906 0.1250000 0.5160 0.21551875 0.1091073 0.1550000 10    0</span>
<span class="co">## 5 0.3300000 0.2550000 0.0800000 0.2050 0.07986215 0.0395000 0.0550000  7    0</span>
<span class="co">## 6 0.4250000 0.3000000 0.0950000 0.3515 0.14100000 0.0775000 0.1200000  8    0</span>
<span class="co">##   V1_I V1_M</span>
<span class="co">## 1    0    1</span>
<span class="co">## 2    0    1</span>
<span class="co">## 3    0    0</span>
<span class="co">## 4    0    1</span>
<span class="co">## 5    1    0</span>
<span class="co">## 6    1    0</span></code></pre>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">uncertainty</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##             V2          V3           V4 V5           V6           V7</span>
<span class="co">## 1 0.0002126953 0.00000e+00 2.673828e-06  0 0.000000e+00 0.0000000000</span>
<span class="co">## 2 0.0000000000 0.00000e+00 0.000000e+00  0 0.000000e+00 0.0000000000</span>
<span class="co">## 3 0.0000000000 0.00000e+00 0.000000e+00  0 0.000000e+00 0.0000000000</span>
<span class="co">## 4 0.0000000000 8.81958e-05 0.000000e+00  0 2.136945e-05 0.0001653547</span>
<span class="co">## 5 0.0000000000 0.00000e+00 0.000000e+00  0 4.027100e-05 0.0000000000</span>
<span class="co">## 6 0.0000000000 0.00000e+00 0.000000e+00  0 0.000000e+00 0.0000000000</span>
<span class="co">##            V8        V9            V1</span>
<span class="co">## 1 6.56467e-07 0.6004253 -2.220446e-16</span>
<span class="co">## 2 0.00000e+00 0.0000000 -2.220446e-16</span>
<span class="co">## 3 0.00000e+00 0.0000000 -2.220446e-16</span>
<span class="co">## 4 0.00000e+00 0.0000000 -2.220446e-16</span>
<span class="co">## 5 0.00000e+00 0.0000000 -2.220446e-16</span>
<span class="co">## 6 0.00000e+00 0.0000000 -2.220446e-16</span></code></pre>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">uncertainty.disj</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##             V2          V3           V4 V5           V6           V7</span>
<span class="co">## 1 0.0002126953 0.00000e+00 2.673828e-06  0 0.000000e+00 0.0000000000</span>
<span class="co">## 2 0.0000000000 0.00000e+00 0.000000e+00  0 0.000000e+00 0.0000000000</span>
<span class="co">## 3 0.0000000000 0.00000e+00 0.000000e+00  0 0.000000e+00 0.0000000000</span>
<span class="co">## 4 0.0000000000 8.81958e-05 0.000000e+00  0 2.136945e-05 0.0001653547</span>
<span class="co">## 5 0.0000000000 0.00000e+00 0.000000e+00  0 4.027100e-05 0.0000000000</span>
<span class="co">## 6 0.0000000000 0.00000e+00 0.000000e+00  0 0.000000e+00 0.0000000000</span>
<span class="co">##            V8        V9 V1_F V1_I V1_M</span>
<span class="co">## 1 6.56467e-07 0.6004253    0    0    0</span>
<span class="co">## 2 0.00000e+00 0.0000000    0    0    0</span>
<span class="co">## 3 0.00000e+00 0.0000000    0    0    0</span>
<span class="co">## 4 0.00000e+00 0.0000000    0    0    0</span>
<span class="co">## 5 0.00000e+00 0.0000000    0    0    0</span>
<span class="co">## 6 0.00000e+00 0.0000000    0    0    0</span></code></pre>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span><span class="op">$</span><span class="va">MSE</span></code></pre></div>
<pre><code><span class="co">## $list_MSE</span>
<span class="co">## [1] 0.6995555 1.9214132 1.4630506 1.0283104</span>
<span class="co">## </span>
<span class="co">## $Mean_MSE</span>
<span class="co">## [1] 1.278082</span>
<span class="co">## </span>
<span class="co">## $Variance_MSE</span>
<span class="co">## [1] 0.2817224</span>
<span class="co">## </span>
<span class="co">## $list_MSE_scale</span>
<span class="co">## [1] 0.01629414 0.04060260 0.03449230 0.01779064</span>
<span class="co">## </span>
<span class="co">## $Mean_MSE_scale</span>
<span class="co">## [1] 0.02729492</span>
<span class="co">## </span>
<span class="co">## $Variance_MSE_scale</span>
<span class="co">## [1] 0.0001467484</span></code></pre>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span><span class="op">$</span><span class="va">F1</span></code></pre></div>
<pre><code><span class="co">## $list_F1</span>
<span class="co">## [1] 0.3636364 0.6666667 0.5000000 0.5294118</span>
<span class="co">## </span>
<span class="co">## $Mean_F1</span>
<span class="co">## [1] 0.5149287</span>
<span class="co">## </span>
<span class="co">## $Variance_F1</span>
<span class="co">## [1] 0.0154488</span></code></pre>
<p>At last, we perform a simple mean imputation as the baseline imputation method. After choosing a certain column (V5 in the example), we can compare the density distribution of the missing values, the imputed values by the method chosen above and the mean imputed values.</p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res_mean_imp</span> <span class="op">&lt;-</span> <span class="va">df</span>
<span class="va">col_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">)</span>
<span class="va">col_num_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">[</span><span class="va">col_num</span><span class="op">]</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">y</span> <span class="kw">in</span> <span class="va">col_num_name</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">res_mean_imp</span><span class="op">[[</span><span class="va">y</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">res_mean_imp</span><span class="op">[[</span><span class="va">y</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">res_mean_imp</span><span class="op">[[</span><span class="va">y</span><span class="op">]</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="op">}</span>


<span class="va">ycol</span> <span class="op">&lt;-</span> <span class="st">"V5"</span>
<span class="va">X.miss</span> <span class="op">&lt;-</span> <span class="va">X.complete</span>
<span class="va">X.miss</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>
<span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">X.complete</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">]</span>, <span class="va">res</span><span class="op">$</span><span class="va">imp</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">]</span>, <span class="va">res_mean_imp</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,
  lines <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"complete"</span>, <span class="st">"imputed"</span>, <span class="st">"mean_imputed"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">y</span>, fill <span class="op">=</span> <span class="va">lines</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ycol</span><span class="op">)</span></code></pre></div>
<p><img src="B_MissImp_Test_files/figure-html/density_comp_with_mean_imp-1.png" width="700"></p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">X.miss</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="va">res</span><span class="op">$</span><span class="va">imp</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">]</span>, <span class="va">X.miss</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">]</span> <span class="op">-</span> <span class="va">res_mean_imp</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,
  lines <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"imputed_error"</span>, <span class="st">"mean_imputed_error"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">rs</span><span class="op">$</span><span class="va">R.mask</span><span class="op">[[</span><span class="va">ycol</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span>
<span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dat</span>, <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">y</span>, fill <span class="op">=</span> <span class="va">lines</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ycol</span><span class="op">)</span></code></pre></div>
<p><img src="B_MissImp_Test_files/figure-html/density_comp_with_mean_imp-2.png" width="700"></p>
<div class="sourceCode"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#dat &lt;- data.frame(</span>
<span class="co">#  y = c(X.miss[[ycol]], df[[ycol]]),</span>
<span class="co">#  lines = rep(c("missing", "observed"), each = length(df[[ycol]]))</span>
<span class="co">#)</span>
<span class="co">#ggplot2::ggplot(dat, ggplot2::aes(x = y, fill = lines)) +</span>
<span class="co">#  ggplot2::geom_density(alpha = 0.3) +</span>
<span class="co">#  ggplot2::labs(x = ycol)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Adrien Ehrhardt.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
